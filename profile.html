<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Личный кабинет · ProStroy</title>
<style>
  html,body{height:100%;margin:0;background:#0b1220;color:#fff;font-family:system-ui}
  .wrap{max-width:760px;margin:80px auto 40px;padding:0 16px}
  .info{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.15);
    padding:16px;border-radius:12px}
  .row{margin:6px 0}
</style>
</head>
<body>
  <div id="site-header"></div>
  <div class="wrap">
    <h2>Личный кабинет</h2>
    <div class="info">
      <div class="row"><b>Email:</b> <span id="email">—</span></div>
      <div class="row"><b>UID:</b> <span id="uid">—</span></div>
    </div>
  </div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    const supa = supabase.createClient(
      "https://hvpbwpegxcbstmpngdyc.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2cGJ3cGVneGNic3RtcG5nZHljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2NDE4NjMsImV4cCI6MjA3NDIxNzg2M30.rtPrQVsaEFA-ee1RphLKKn8q3TSOXeapZnZgfe9HVws",
      { auth:{ persistSession:false } }
    );
    history.replaceState(null,'',location.href);
    (async ()=>{
      const { data:{ session } } = await supa.auth.getSession();
      if(!session){ location.href='index.html'; return; }
      document.getElementById('who')?.textContent = session.user.email;
      document.getElementById('email').textContent = session.user.email;
      document.getElementById('uid').textContent = session.user.id;
      document.getElementById('btnLogout')?.addEventListener('click', async (e)=>{
        e.preventDefault(); await supa.auth.signOut(); location.replace('index.html');
      });
    })();
  </script>
  <script src="header.js"></script>
  <script>loadHeader('site-header');</script>
</body>
</html>
